<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="hr_ai_assistant.ChatWidget" owl="1">
        <div class="hr-ai-chat-container">
            <!-- Header -->
            <div class="hr-ai-chat-header">
                <div>
                    <h2>ü§ñ HR AI Assistant</h2>
                    <p>Chat v·ªõi tr·ª£ l√Ω AI v·ªÅ nh√¢n s·ª±</p>
                </div>
                <button class="hr-ai-clear-btn" t-on-click="clearHistory" title="X√≥a l·ªãch s·ª≠ chat">
                    üóëÔ∏è
                </button>
            </div>

            <!-- Sample questions -->
            <div class="hr-ai-chat-samples">
                <p>üí° C√¢u h·ªèi g·ª£i √Ω:</p>
                <div class="hr-ai-sample-buttons">
                    <button class="hr-ai-sample-btn" t-on-click="() => this.askSample('Danh s√°ch nh√¢n vi√™n')">
                        üë• Danh s√°ch NV
                    </button>
                    <button class="hr-ai-sample-btn" t-on-click="() => this.askSample('L∆∞∆°ng th√°ng n√†y')">
                        üí∞ L∆∞∆°ng
                    </button>
                    <button class="hr-ai-sample-btn" t-on-click="() => this.askSample('Ch·∫•m c√¥ng th√°ng 1')">
                        üìÖ Ch·∫•m c√¥ng
                    </button>
                    <button class="hr-ai-sample-btn" t-on-click="() => this.askSample('B·∫£o hi·ªÉm')">
                        üè• B·∫£o hi·ªÉm
                    </button>
                </div>
            </div>

            <!-- Messages -->
            <div class="hr-ai-chat-messages" t-ref="chatContainer">
                <t t-foreach="state.messages" t-as="msg" t-key="msg_index">
                    <div t-attf-class="hr-ai-message {{msg.is_bot ? 'bot' : 'user'}}">
                        <div class="hr-ai-message-avatar">
                            <t t-if="msg.is_bot">ü§ñ</t>
                            <t t-else="">üë§</t>
                        </div>
                        <div class="hr-ai-message-content">
                            <div class="hr-ai-message-text" t-out="formatMessage(msg.message)"/>
                            <div class="hr-ai-message-time" t-out="msg.time"/>
                        </div>
                    </div>
                </t>
                
                <t t-if="state.loading">
                    <div class="hr-ai-message bot">
                        <div class="hr-ai-message-avatar">ü§ñ</div>
                        <div class="hr-ai-message-content">
                            <div class="hr-ai-typing">
                                <span class="hr-ai-dot"></span>
                                <span class="hr-ai-dot"></span>
                                <span class="hr-ai-dot"></span>
                            </div>
                        </div>
                    </div>
                </t>
            </div>

            <!-- Input -->
            <div class="hr-ai-chat-input">
                <div class="hr-ai-input-group">
                    <textarea 
                        t-model="state.input"
                        placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n..."
                        t-on-keypress="onKeyPress"
                        t-att-disabled="state.loading"
                        rows="1"
                    />
                    <button 
                        class="hr-ai-send-btn"
                        t-on-click="sendMessage"
                        t-att-disabled="state.loading or !state.input.trim()"
                    >
                        <t t-if="state.loading">‚è≥</t>
                        <t t-else="">üì§</t>
                    </button>
                </div>
            </div>
        </div>
    </t>
</templates>
